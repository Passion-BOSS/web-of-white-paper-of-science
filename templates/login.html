<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>登录 - 科创白皮书</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css"></head>
<body>
    <!-- 头部 -->
    <header>
        <div class="container header-content">
            <div class="logo">
                <a href="{{ url_for('index') }}">
                    <div class="logo-icon">
                        <i class="fas fa-book-open"></i>
                    </div>
                    <div class="logo-text">
                        <h1>科创白皮书</h1>
                        <p>大连理工大学创新创业竞赛指南</p>
                    </div>
                </a>
            </div>
            
            <ul class="nav-links">
                <li><a href="{{ url_for('index') }}">首页</a></li>
                <li><a href="{{ url_for('categories') }}">问题分类</a></li>
                <li><a href="{{ url_for('ask') }}">我要提问</a></li>
                {% if current_user.is_authenticated and current_user.is_admin %}
                <li><a href="{{ url_for('admin') }}">管理面板</a></li>
                {% endif %}
            </ul>
            
            <div class="auth-buttons">
                {% if current_user.is_authenticated %}
                    <span class="user-welcome">欢迎, {{ current_user.username }}</span>
                    <a href="{{ url_for('logout') }}" class="btn btn-outline">
                        <i class="fas fa-sign-out-alt"></i>退出
                    </a>
                {% else %}
                    <a href="{{ url_for('login') }}" class="btn btn-outline active">
                        <i class="fas fa-sign-in-alt"></i>登录
                    </a>
                    <a href="{{ url_for('register') }}" class="btn btn-primary">
                        <i class="fas fa-user-plus"></i>注册
                    </a>
                {% endif %}
            </div>
        </div>
    </header>
    
    <!-- 消息提示 -->
    {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
            <div class="flash-messages container">
                {% for category, message in messages %}
                    <div class="flash-message flash-{{ category }}">
                        {{ message }}
                        <button class="flash-close" onclick="this.parentElement.style.display='none'">&times;</button>
                    </div>
                {% endfor %}
            </div>
        {% endif %}
    {% endwith %}
    
    <!-- 主内容区 -->
    <div class="container main-content">
        <div class="auth-container">
            <div class="auth-card">
                <h2><i class="fas fa-sign-in-alt"></i> 用户登录</h2>
                <p>登录以访问更多功能</p>
                
                <form method="POST" action="{{ url_for('login') }}">
                    <div class="form-group">
                        <label for="username">用户名</label>
                        <input type="text" id="username" name="username" required placeholder="请输入用户名">
                    </div>
                    
                    <div class="form-group">
                        <label for="password">密码</label>
                        <div class="password-field">
                            <input type="password" id="password" name="password" required placeholder="请输入密码">
                            <button type="button" class="toggle-password">
                                <i class="fas fa-eye"></i>
                            </button>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <button type="submit" class="btn btn-primary w-100">
                            <i class="fas fa-sign-in-alt"></i> 登录
                        </button>
                    </div>
                    
                    <div class="auth-link">
                        还没有账号？ <a href="{{ url_for('register') }}">立即注册</a>
                    </div>
                </form>
                
                <div class="mt-3 text-center">
                    <p style="color: var(--gray-dark); font-size: 0.9rem;">
                        <i class="fas fa-info-circle"></i> 提示：普通用户无需登录即可浏览全部内容，只有管理员需要登录。
                    </p>
                </div>
            </div>
        </div>
    </div>
    
    <!-- 底部 -->
    <footer>
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h5>科创白皮书</h5>
                    <p>大连理工大学创新创业竞赛一站式指南，整合高频问题与解决方案，助力学生科创之路。</p>
                </div>
                
                <div class="footer-section">
                    <h5>快速链接</h5>
                    <ul class="footer-links">
                        <li><a href="{{ url_for('index') }}">首页</a></li>
                        <li><a href="{{ url_for('categories') }}">问题分类</a></li>
                        <li><a href="{{ url_for('ask') }}">我要提问</a></li>
                    </ul>
                </div>
                
                <div class="footer-section">
                    <h5>主要比赛</h5>
                    <ul class="footer-links">
                        <li><a href="#">大学生创新创业训练计划</a></li>
                        <li><a href="#">"挑战杯"全国大学生系列竞赛</a></li>
                        <li><a href="#">"互联网+"大学生创新创业大赛</a></li>
                    </ul>
                </div>
                
                <div class="footer-section">
                    <h5>联系我们</h5>
                    <ul class="footer-links">
                        <li><a href="#">大连理工大学创新创业学院</a></li>
                        <li><a href="#">科创白皮书学姐学长邮箱: kcb@dlut.edu.cn</a></li>
                        <li><a href="#">微信公众号: DUT科创白皮书</a></li>
                    </ul>
                </div>
            </div>
            
            <div class="copyright">
                <p>&copy; 2026 大连理工大学大工书院科创白皮书 | 设计：大工书院6人小组 | 仅供内部使用</p>
            </div>
        </div>
    </footer>
    
    <script src="{{ url_for('static', filename='js/auth.js') }}"></script>
    <script>
        // 密码可见性切换
        document.querySelectorAll('.toggle-password').forEach(button => {
            button.addEventListener('click', function() {
                const input = this.previousElementSibling;
                const icon = this.querySelector('i');
                if (input.type === 'password') {
                    input.type = 'text';
                    icon.classList.remove('fa-eye');
                    icon.classList.add('fa-eye-slash');
                } else {
                    input.type = 'password';
                    icon.classList.remove('fa-eye-slash');
                    icon.classList.add('fa-eye');
                }
            });
        });
    </script>
</body>
</html>